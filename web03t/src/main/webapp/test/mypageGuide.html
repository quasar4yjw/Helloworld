<!DOCTYPE html>
<html>
<head>

<link rel="shortcut icon" href="../favicon.ico">
<link rel="stylesheet" type="text/css" href="../css/normalizeCurved.css" />
<link rel="stylesheet" type="text/css" href="../css/demoCurved.css" />
<link rel="stylesheet" href="../fonts/font-awesome-4.2.0/css/font-awesome.minCurved.css">
<link rel="stylesheet" type="text/css" href="../css/tooltip-curved.css" />






<link rel="stylesheet" href="../css/jquery.ezdz.css">

<!-- <link
  href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css"
  rel="stylesheet">
 -->
<link rel="stylesheet" type="text/css" href="../css/defaultConn.css" />

<link rel="stylesheet" type="text/css" href="../css/normalize.css" />
<link rel="stylesheet" type="text/css" href="../css/demo.css" />
<link rel="stylesheet" type="text/css" href="../css/componentJoin.css" />
<link rel="stylesheet" type="text/css" href="../css/cs-select.css" />
<link rel="stylesheet" type="text/css" href="../css/cs-skin-boxes.css" />

<!-- <link rel='stylesheet' href='/web03t/css/bootstrap.min.css'>
<link rel='stylesheet' href='/web03t/css/bootstrap-theme.min.css'> -->
<link rel='stylesheet' href='../css/common.css'>
<link rel='stylesheet' href='/web03t/css/login-popup.css'>

<link href="../css/multi-select.css" media="screen" rel="stylesheet" type="text/css">
<!-- <meta charset="UTF-8"> -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Welcome to the HelloWorld</title>




<style>
form#myform {
background-color: #f3f3f5;
}
.content {
  width: 100%;
  padding: 30px 50px 50px 80px;
  margin-bottom: 20px;
  float: left;
  border: 1px solid #bcbcbc;
}


.title {
  width: 350px;
  height: 30px;
  padding: 5px 0px 5px 10px;
}

#price {
  text-align: right;

}

.input {
  width: 70px;
  height: 30px;
}

#field {
  margin-bottom: 20px;
  /* width: 100px;
    display: inline; */
}

#travelSelect {
  position: relative;
  left: 5px;
  top: 165px;
}

#titleSet {
  position: relative;
  left: 5px;
  top: 280px;
}

#paySet {
  position: relative;
  left: 5px;
  top: 370px;
}

#interestSelect {
  position: relative;
  left: 5px;
  top: 470px;
}

#mainPlace {
  position: relative;
  left: 5px;
  top: 550px;
}

#scheduleSet {
  position: relative;
  left: 5px;
  top: 700px;
}

#imgUpload {
  position: relative;
  left: 5px;
  top: 1000px;
}

.interest-select {
  width: 171px;
  display: inline;
}

#example {
  border-bottom-color: red;
}

.plan_add {
  rows: "3";
  cols: "30";
}

.date_add {
  display: lnline;
  width: 50px;
}

.time_add {
  width: 125px;
}

.img-upload {
  width: 100%;
}

.fs-form-overview .fs-fields::before {
  content: '여행일정 등록';
}

.travel-select {
  width: 100%;
}

.interest-select {
  width: 31.7%;
}

.regiBtn {
  margin: 0px 190px 50px 20px;
}

.fs-form-overview .fs-fields::before {
display: block;
margin-bottom: 1.5em;
color: #ff5a5f;
content: '회원 정보 수정';
font-weight: 700;
font-size: 1.85em;
}

.Mypage-update {
  border: 1px solid blue;
}

#gender {
display: -webkit-inline-box;
width: 12%;
}

button.fs-submit {
margin: 50px 50px 50px 0px;
border-color: #ff5a5f;
color: #ff5a5f;
width: 330px;
margin-top: 30px;
background-color: white;
}

.tooltip-west .tooltip-content {
font-size: 1em;
left: 7em;
}


</style>

</head>
<body>





  <div class='container'>
    <div class="header"></div>





    <div class="content">


 <div class="Mypage-update">

 <form id="myform" class="fs-form fs-form-overview fs-show" autocomplete="off"
action="../guide/update.do" method="post" enctype="multipart/form-data">




    
    


          
         <ol class="fs-fields"> 
  
    <li class="">
    <label class="fs-field-label fs-anim-upper"  id="guidePhoto" for="q2">프로필 사진</label><br>
<!-- 사진 업로드 -->
      <input type="file" name="photofile"  accept="image/png, image/jpeg">
<img id='guideImage' src=''></img>
    
    
    </li>
          <br>
            <li class="">
              <label class="fs-field-label fs-anim-upper" for="q2">이메일 주소</label>
              <input class="fs-anim-lower-email2" id="email" type="email" READONLY>
            </li>
            
            
            
            
            <li class="">
              <label class="fs-field-label fs-anim-upper" for="q1">패스워드</label>
              <input class="fs-anim-lower fs-anim-lower-password" id="password" name="q1" type="password">
              <div class="tooltip tooltip-west">
              <span class="tooltip-content tooltip-content-password">6자리 이상, 영문 +숫자 조합이어야 합니다.</span>
            </div>
            </li>
            
            <li class="">
              <label class="fs-field-label fs-anim-upper" for="q1">패스워드 확인</label>
              <input class="fs-anim-lower fs-anim-lower-repassword" id="repassword" name="q1" type="password">
              <div class="tooltip tooltip-west">
              <span class="tooltip-content tooltip-content-repassword">6자리 이상, 영문 +숫자 조합이어야 합니다.</span>
            </div>
            </li>
            
            <li class="">
              <label class="fs-field-label fs-anim-upper" for="q1">이름</label>
              <input class="fs-anim-lower" id="guideName" name="q1" type="text" readonly>
            </li>
            
            <li class="">
              <label class="fs-field-label fs-anim-upper" for="q1">생일</label>
              <input class="fs-anim-lower" id="birthDate" name="q1" type="date" readonly>
            </li>
            
            <li class="">
              <label class="fs-field-label fs-anim-upper" for="q1">전화번호</label>
              <input class="fs-anim-lower" id="tel" name="q1" type="tel" onkeydown="return showKeyCode(event)" required="">
            </li>
             
             <br>  

            
            <li class="">
              <label class="fs-field-label fs-anim-upper" for="q1">사용가능언어를 선택해주세요.</label>
            <select multiple="multiple" id="guideLanguage" name="my-select[]" class="language-selector my-select form-control" required="">    
                  <option value="id">Bahasa Indonesia</option>    
                  <option value="ms">Bahasa Melayu</option>    
                  <option value="ca">Català</option>    
                  <option value="da">Dansk</option>    
                  <option value="de">Deutsch</option>    
                  <option value="en">English</option>    
                  <option value="es">Español</option>    
                  <option value="el">Eλληνικά</option>    
                  <option value="fr">Français</option>    
                  <option value="it">Italiano</option>    
                  <option value="hu">Magyar</option>    
                  <option value="nl">Nederlands</option>    
                  <option value="no">Norsk</option>    
                  <option value="pl">Polski</option>    
                  <option value="pt">Português</option>    
                  <option value="fi">Suomi</option>    
                  <option value="sv">Svenska</option>
                  <option value="tr">Türkçe</option>
                  <option value="is">Íslenska</option>
                  <option value="cs">Čeština</option>
                  <option value="ru">Русский</option>
                  <option value="th">ภาษาไทย</option>
                  <option value="zh">中文 (简体)</option>
                  <option value="zh-TW">中文 (繁體)</option>
                  <option value="ja">日本語</option>
                  <option value="ko">한국어</option>
              </select>
              </li>
            
            <li class="">
            <label class="fs-field-label fs-anim-upper" for="q1">자기 소개</label>
            <textarea class="fs-anim-lower" id="introduce" name="q1" style="font-size: 1.1em; "></textarea>
            
            </li>
            
            
            
          </ol><!-- /fs-fields -->
          <button class="fs-submit fs-submit-guide" type="submit" name ="updateButton" style="font-size: 1.5em; padding: 23px 0px;">수정하기</button>
        </form><!-- /fs-form -->
      <div class="fs-controls"><button class="fs-continue">Continue</button><nav class="fs-nav-dots"><button class=""></button><button class=""></button><button class=""></button><button class=""></button><button class=""></button><button class="fs-dot-current"></button></nav><span class="fs-numbers"><span class="fs-number-current">6</span><span class="fs-number-total">6</span></span><div class="fs-progress" style="width: 100%;"></div></div><span class="fs-message-error"></span></div><!-- /fs-form-wrap -->

  
 </div>

  </div>
  

 </div>



  <div class="footer"></div>
  <div id="somedialog" class="dialog"></div>
    <script type="text/javascript" src='../js/jquery-1.11.1.js'></script>
  <script type="text/javascript" src='../js/handlebars-v2.0.0.js'></script>
  <!-- <script type="text/javascript" src='../js/require.js'></script> -->




  <script src="../js/modernizr.customJoin.js"></script>
  <script src="../js/classie.js"></script>
  <script src="../js/selectFx.js"></script>
  <script src="../js/fullscreenForm.js"></script>
  <!-- joinTourlist -->

  <script type="text/javascript" src='../js/jquery-1.11.1.js'></script>

  <script src="../js/classieSelectJoinForm.js"></script>
  <!-- <script src="../js/cbpSplitLayoutSelectJoinForm.js"></script> -->



 
 

  <script type="text/javascript">
    $('.dialog').load('loginDialog.html');
    $('.header').load('header.html');
    $('.footer').load('footer.html');
  </script>
  
  <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="../js/jquery.form.js"></script>
    <script src="../js/jquery.ezdz.js"></script>
    
    <script>
        $('[type="file"]').ezdz({
            text: '사진을 올려주세요.',
            validators: {
                maxWidth:  800,
                maxHeight: 800
            },
            reject: function(file, errors) {
                if (errors.mimeType) {
                    alert(file.name + ' jpg 또는 png 파일을 업로드 해주세요.');
                }

                if (errors.maxWidth) {
                    alert(file.name + ' 가로길이는 800px을 넘을 수 없습니다.');
                }

                if (errors.maxHeight) {
                    alert(file.name + ' 세로길이는 800px을 넘을 수 없습니다.');
                }
            }
        });
    </script>
  
  <script src="../js/jquery.multi-select.js" type="text/javascript"></script>
  
  
  <script>
$(function(){
  loadGuide("apple@apple.com");
});
var photoUrl;
var guide;
function loadGuide(email) {
    $.getJSON('../guide/view.do?email=' + email, 
      function(data){
        $('#email').val(data.guide.email); 
        $('#guideName').val(data.guide.userName);
        $('#tel').val(data.guide.tel);
        
         /* $('.ezdz-dropzone').addClass('ezdz-accept').children('div').first().html("<img src='../fileupload/" + data.guide.photo + "'></img>");
           console.log(data.guideLang);
           console.log(data.guide.photo);  */
           photoUrl=data.guide.photo;
             console.log(data.guide.photo);
             console.log(data);
             if(data.guide.photo == null) {
            	 
               } else {
                 $('.ezdz-dropzone').addClass('ezdz-accept').children('div').first().html("<img src='../fileupload/" + data.guide.photo + "'></img>");
               }  
           
         $.each(data.guideLang, function( index, value ) { 
         $('#guideLanguage option[value = ' + data.guideLang[index].guideLanguage + ']').attr('selected', 'selected');
         });
         $('.my-select').multiSelect();
        
        
        $('#introduce').val(data.guide.introduce);
        
        if (data.guide.birthDate) {
            $('#birthDate').val(data.guide.birthDate);
           }

        guide = data.guide;
        console.log($('.my-select').val());
      });
  }


      $('.fs-submit-guide').click(function(){
    	  
    	  var temp = encodeURIComponent( JSON.stringify($.extend({}, $('.my-select').val())) );
    	  console.log('-------------');
    	  console.log(photoUrl);
    	
    	  if (confirm('정말 수정하시겠습니까?')) {
         console.log($('.my-select').val() + "템프");
       
    	  /*  if (guide.tel == $('#tel').val() &&
                     guide.introduce == $('#introduce').val() &&
                      $('#password').val()  ==  "" &&
                      $('#repassword').val()  ==  ""    &&
                        guide.guideLanguageList == temp && 
                      guide.photo == photoUrl    
                       ) { 
    		              $("button[name='updateButton']").prop("type", "button");
    		             alert('수정된 정보가 없습니다.');
                  } else if ($('#password').val()  ==  "" ||
                      $('#repassword').val()  ==  "" ) {
                	   $("button[name='updateButton']").prop("type", "button"); 
                    alert('비밀번호를 모두 입력해주세요.');
                  }  else { 
                	 console.log('성공');
                	 $("button[name='updateButton']").prop("type", "submit");
                	 $('#myform').ajaxForm({
                         data: { 
                             email : $('#email').val(),
                             tel : $('#tel').val(),
                             password : $('#repassword').val(),
                             introduce : $('#introduce').val(),
                             guideLanguageList : temp,
                             photo : photoUrl
                            },
                         dataType:'json',
                         cache: false,
                         processData: false,
                         contentType: false,
                         beforeSubmit: function (data,form,option) {
                             //validation체크 
                             //막기위해서는 return false를 잡아주면됨
                             
                             console.log("사진 업로드 성공11!!");
                             return true;
                         },
                         success: function(response,status){
                             //성공후 서버에서 받은 데이터 처리
                             alert("수정되었습니다.");
                             location.reload();
                         },
                         error: function(jqXHR, textStatus, errorThrown){ 
                             console.log(jqXHR + ":" + textStatus + ":" + errorThrown);
                             //에러발생을 위한 code페이지
                         }                               
                     });
                	 
                	 
               /*    } */
    	  }
    	  else {
    		   $("button[name='updateButton']").prop("type", "button");
    		  console.log('취소');
          } 
    	  
      });
    	  
          
      
</script>

<script>
pwdValidate('.fs-anim-lower-password', '.tooltip-content-password');
pwdValidate('.fs-anim-lower-repassword', '.tooltip-content-repassword');
function pwdValidate(target, message){
    $(target).focusout(function(){
      var pwdVal = this.value;
      var validate = pwdVal.match(/^(?=\w{6,}$)(?=.*\d)(?=.*[A-z]).*/);
      if(pwdVal != ""){
        if (pwdVal.match(/^(?=\w{6,}$)(?=.*\d)(?=.*[A-z]).*/) == null) {
                $(message).html("6자리 이상, 영문 +숫자 조합이어야 합니다.");
                    appear(message);
                    this.focus(); 
        } 
        else if(target == '.fs-anim-lower-repassword' && $('.fs-anim-lower-password').val() != this.value) {
             $('.tooltip-content-repassword').html("입력한 패스워드가 동일하지 않습니다.");
              appear(message);
              this.focus();
            }
      }
      console.log(pwdVal.match(/^(?=\w{6,}$)(?=.*\d)(?=.*[A-z]).*/));
      
    });
    
    $(target).keyup(function(){
        var pwdVal = this.value;
        var validate = pwdVal.match(/^(?=\w{6,}$)(?=.*\d)(?=.*[A-z]).*/);
        console.log(pwdVal.match(/^(?=\w{6,}$)(?=.*\d)(?=.*[A-z]).*/));
        if(target == '.fs-anim-lower-repassword'){
          if($('.fs-anim-lower-password').val() == this.value && pwdVal.match(/^(?=\w{6,}$)(?=.*\d)(?=.*[A-z]).*/)){
          disappear(message);
        }
        }
        else if(pwdVal.match(/^(?=\w{6,}$)(?=.*\d)(?=.*[A-z]).*/)){
                    disappear(message);
                    }
      });
    }

function appear(message){
    $(message).css({
          "opacity": "1",
       "-webkit-transform": "translate3d(0,50%,0) rotate3d(0,0,0,0)",
       "transform": "translate3d(0,50%,0) rotate3d(0,0,0,0)",
       "pointer-events": "auto"
       });
  }
  function disappear(message){
    $(message).css({
          "opacity": "0",
          "-webkit-transform": "translate3d(0,50%,0) rotate3d(1,1,1,30deg)",
       "transform": "translate3d(0,50%,0) rotate3d(1,1,1,30deg)",
       "pointer-events": "none"
       });
  }
  
  
  function showKeyCode(event) {
      event = event || window.event;
      var keyID = (event.which) ? event.which : event.keyCode;
      if( ( keyID >=48 && keyID <= 57 ) || ( keyID >=96 && keyID <= 105 ) || keyID == 8 || keyID == 46)
      {
          return;
      }
      else
      {
          return false;
      }
  }
</script>


</body>
</html>